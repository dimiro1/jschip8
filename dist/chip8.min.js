!function t(e,i,A){function s(o,a){if(!i[o]){if(!e[o]){var n="function"==typeof require&&require;if(!a&&n)return n(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return s(i?i:t)},c,c.exports,t,e,i,A)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<A.length;o++)s(A[o]);return s}({1:[function(t,e,i){"use strict";var A=t("./chip8").Chip8,s=t("./gfx"),r=t("./sound"),o=t("./utils"),a=document.getElementById("screen"),n=new s(a,"blu"),h=new r,c=new A(n,h);o.load("/roms/INVADERS",function(t){c.loadRom(new Uint8Array(t)),window.requestAnimationFrame(function e(){for(var t=0;10>t;t++)c.running&&c.step();c.shouldRedraw&&(c.gfx.draw(),c.shouldRedraw=!1),window.requestAnimationFrame(e)})});var u={49:1,50:2,51:3,52:12,81:4,87:5,69:6,82:13,65:7,83:8,68:9,70:14,90:10,88:0,67:11,86:15};window.addEventListener("keydown",function(t){c.setKey(u[t.keyCode])}),window.addEventListener("keyup",function(t){c.resetKey(u[t.keyCode])})},{"./chip8":2,"./gfx":3,"./sound":5,"./utils":7}],2:[function(t,e,i){"use strict";function A(t,e){this.v=new Uint8Array(16),this.pc=512,this.stack=new r,this.sound=e,this.memory=new s,this.gfx=t,this.shouldRedraw=!1,this.keys=new Uint8Array(16),this.i=0,this.dt=0,this.st=0,this.running=!0;for(var i=0;i<o.length;i++)this.memory.write(i,o[i])}var s=t("./memory"),r=t("./stack"),o=(t("./gfx"),[240,144,144,144,240,32,96,32,32,112,240,16,240,128,240,240,16,240,16,240,144,144,240,16,16,240,128,240,16,240,240,128,240,144,240,240,16,32,64,64,240,144,240,144,240,240,144,240,16,240,240,144,240,144,144,224,144,224,144,224,240,128,128,128,240,224,144,144,144,224,240,128,240,128,240,240,128,240,128,128]);A.prototype.setKey=function(t){this.keys[t]=1},A.prototype.resetKey=function(t){this.keys[t]=0},A.prototype.loadRom=function(t){for(var e=0;e<t.length;e++)this.memory.write(e+512,t[e])},A.prototype.increment=function(){this.pc+=2},A.prototype.updateTimers=function(){this.dt>0&&this.dt--,this.st>0&&(1==this.st&&this.sound.beep(),this.st--)},A.prototype.decodeExecute=function(t){var e=(3840&t)>>8,i=(240&t)>>4;switch(this.increment(),61440&t){case 0:switch(t){case 224:this.gfx.cls(),this.shouldRedraw=!0;break;case 238:this.pc=this.stack.pop();break;default:throw new Error("Unknown opcode 0x"+t.toString(16).toUpperCase())}break;case 4096:this.pc=4095&t;break;case 8192:this.stack.push(this.pc),this.pc=4095&t;break;case 12288:var A=255&t;this.v[e]==A&&this.increment();break;case 16384:var A=255&t;this.v[e]!=A&&this.increment();break;case 20480:this.v[e]==this.v[i]&&this.increment();break;case 24576:A=255&t,this.v[e]=A;break;case 28672:this.v[e]+=255&t;break;case 32768:switch(15&t){case 0:this.v[e]=this.v[i];break;case 1:this.v[e]|=this.v[i];break;case 2:this.v[e]&=this.v[i];break;case 3:this.v[e]^=this.v[i];break;case 4:var s=this.v[e]+this.v[i];this.v[15]=s>255?1:0,this.v[e]=s;break;case 5:this.v[15]=this.v[e]>this.v[i]?1:0,this.v[e]-=this.v[i];break;case 6:this.v[15]=1&this.v[e],this.v[e]/=2;break;case 7:this.v[15]=this.v[i]>this.v[e]?1:0,this.v[e]=this.v[i]-this.v[e];break;case 14:this.v[15]=128&this.v[e],this.v[e]=2*this.v[e];break;default:throw new Error("Unknown opcode 0x"+t.toString(16).toUpperCase())}case 36864:this.v[e]!=this.v[i]&&this.increment();break;case 40960:this.i=4095&t;break;case 45056:var r=4095&t;this.pc=r+this.v[0];break;case 49152:var o=Math.floor(255*Math.random()),A=255&t;this.v[e]=o&A;break;case 53248:var a=15&t,n=this.v[e],h=this.v[i];this.v[15]=0;for(var c=0;a>c;c++)for(var u=0;8>u;u++){var p=this.memory.read(this.i+c)>>7-u&1,v=n+u,f=h+c;1==this.gfx.getPixel(v,f)&&(this.v[15]=1),1==(this.gfx.getPixel(v,f)^p)?this.gfx.setPixel(v,f):this.gfx.clearPixel(v,f)}this.shouldRedraw=!0;break;case 57344:switch(15&t){case 14:1==this.keys[this.v[e]]&&this.increment();break;case 1:0==this.keys[this.v[e]]&&this.increment();break;default:throw new Error("Unknown opcode 0x"+t.toString(16).toUpperCase())}case 61440:switch(255&t){case 7:this.v[e]=this.dt;break;case 10:var m=this.setKey,k=this;this.setKey=function(t){k.v[e]=t,k.setKey=m.bind(k),k.setKey.apply(k,arguments),k.running=!0},this.running=!1;break;case 21:this.dt=this.v[e];break;case 24:this.st=this.v[e];break;case 30:this.i+=this.v[e];break;case 41:this.i=5*this.v[e];break;case 51:this.memory.write(this.i,this.v[e]/100),this.memory.write(this.i+1,this.v[e]/10%10),this.memory.write(this.i+2,this.v[e]%100%10);break;case 85:for(var c=0;e>=c;c++)this.memory.write(this.i+c,this.v[c]);break;case 101:for(var c=0;e>=c;c++)this.v[c]=this.memory.read(this.i+c)}}this.updateTimers()},A.prototype.fetch=function(){return this.memory.readWord(this.pc)},A.prototype.step=function(){var t=this.fetch();this.decodeExecute(t)},e.exports={Chip8:A,Chip8Font:o}},{"./gfx":3,"./memory":4,"./stack":6}],3:[function(t,e,i){"use strict";function A(t,e){this.canvas=t,this.buffer=new Uint8Array(s*r),this.context=this.canvas.getContext("2d"),this.scheme=o[e],this.imageData=this.context.createImageData(s,r)}var s=64,r=32,o={blackwhite:[0,16777215],whiteblack:[16777215,0],dotmatrix:[10206223,997391],redy:[16711680,16776960],bgreen:[0,2751534],gbp:[7439222,0],blueshades:[8240,10600942],blu:[131457,3865598]};A.prototype.draw=function(){for(var t=0;s*r>t;t++){var e=this.scheme[1];0==this.buffer[t]&&(e=this.scheme[0]),this.imageData.data[4*t+0]=e>>16&255,this.imageData.data[4*t+1]=e>>8&255,this.imageData.data[4*t+2]=255&e,this.imageData.data[4*t+3]=255}this.context.putImageData(this.imageData,0,0)},A.prototype.getPixel=function(t,e){return this.buffer[this.i(t,e)]},A.prototype.setPixel=function(t,e){this.buffer[this.i(t,e)]=1},A.prototype.clearPixel=function(t,e){this.buffer[this.i(t,e)]=0},A.prototype.cls=function(){for(var t=0;s*r>t;t++)this.buffer[t]=0},A.prototype.i=function(t,e){return t+e*s},e.exports=A},{}],4:[function(t,e,i){"use strict";function A(){this.memory=new Uint8Array(s)}var s=4096;A.prototype.read=function(t){return this.memory[t]},A.prototype.readWord=function(t){return this.memory[t]<<8|this.memory[t+1]},A.prototype.write=function(t,e){this.memory[t]=e},A.prototype.writeWord=function(t,e){this.write(t,e>>8),this.write(t+1,255&e)},e.exports=A},{}],5:[function(t,e,i){"use strict";function A(){this.sound=new Audio("data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=")}A.prototype.beep=function(){this.sound.play()},e.exports=A},{}],6:[function(t,e,i){"use strict";function A(){this.sp=0,this.stack=new Uint16Array(s)}var s=16;A.prototype.pop=function(){if(0==this.sp)throw new Error("Stack Underflow");return this.stack[--this.sp]},A.prototype.push=function(t){if(this.sp==s)throw new Error("Stack Overflow");this.stack[this.sp++]=t},e.exports=A},{}],7:[function(t,e,i){"use strict";e.exports={load:function(t,e,i){var A=new XMLHttpRequest;A.open("GET",t,!0),A.responseType="arraybuffer",A.send(),A.onreadystatechange=function(){4===A.readyState&&(200===A.status?"function"==typeof e&&e(A.response):"function"==typeof i&&i(A.response))}}}},{}]},{},[1]);